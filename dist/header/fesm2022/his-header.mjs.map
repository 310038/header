{"version":3,"file":"his-header.mjs","sources":["../../../header/src/lib/header.component.ts","../../../header/src/lib/header.component.html","../../../header/src/public-api.ts","../../../header/src/his-header.ts"],"sourcesContent":["import { ButtonModule } from 'primeng/button';\nimport {\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  TemplateRef,\n} from '@angular/core';\nimport { InputMaskModule } from 'primeng/inputmask';\nimport { ToolbarModule } from 'primeng/toolbar';\nimport { DropdownModule } from 'primeng/dropdown';\nimport { InputTextModule } from 'primeng/inputtext';\nimport { TableModule } from 'primeng/table';\nimport { ToastModule } from 'primeng/toast';\nimport { GalleriaModule } from 'primeng/galleria';\nimport { DialogModule } from 'primeng/dialog';\nimport { DividerModule } from 'primeng/divider';\nimport { FormsModule } from '@angular/forms';\nimport * as jsyaml from 'js-yaml';\nimport { TimesIcon } from 'primeng/icons/times';\n@Component({\n  selector: 'his-header',\n  standalone: true,\n  templateUrl: './header.component.html',\n  styleUrls:['./header.component.scss'],\n  imports: [\n    InputMaskModule,\n    DividerModule,\n    DialogModule,\n    GalleriaModule,\n    ToastModule,\n    TableModule,\n    InputTextModule,\n    DropdownModule,\n    ButtonModule,\n    ToolbarModule,\n    FormsModule,\n    TimesIcon,\n  ],\n})\nexport class HeaderComponent implements OnInit {\n\n  #value: any;\n  @Input()\n  set value(value: any) {\n    this.#value = value;\n    this.currentRowChange(0);\n  }\n  get value(): any {\n    return this.#value;\n  }\n\n  @Input() titleTemplate!: TemplateRef<any>;\n  @Input() detailTemplate!: TemplateRef<any>;\n  @Input() listTemplate!: TemplateRef<any>;\n  @Input() isSearchDisabled: boolean = false;\n\n  @Output() search = new EventEmitter<any>();\n  @Output() RowChange = new EventEmitter<any>();\n\n  yamlDocument: any;\n  searchText: string = '';\n  isShowDetail: boolean = false;\n  isShowList: boolean = false;\n\n  #initValue: any;\n  #currentIndex: number = -1;\n  #currentRow: any;\n\n\n  /**\n   * 初始化\n   */\n  ngOnInit(): void {\n    this.#initValue = this.value;\n  }\n\n  /**\n   * currentRowChange\n   * @param rowIndex\n   */\n  currentRowChange(rowIndex: number): void {\n    if (rowIndex >= 0) {\n      this.#currentRow = this.value[rowIndex];\n      if (this.isUseDefaultTemplate()) {\n        this.yamlDocument = jsyaml.dump(this.#currentRow);\n      }\n      this.#currentIndex = rowIndex;\n      this.RowChange.emit(this.#currentRow);\n    }\n  }\n\n  /**\n   * 上一筆資料\n   */\n  onPrevClick(): void {\n    const rowIndex = (this.#currentIndex - 1 + this.value.length) % this.value.length;\n    this.currentRowChange(rowIndex);\n  }\n\n  /**\n   * 下一筆資料\n   */\n  onNextClick(): void {\n    const rowIndex = (this.#currentIndex + 1) % this.value.length;\n    this.currentRowChange(rowIndex);\n  }\n  /**\n   * 點選一筆資料\n   * @param rowIndex\n   */\n  onRowSelect(rowIndex: number) {\n    this.currentRowChange(rowIndex);\n  }\n\n  /**\n   * 搜尋資料\n   * @param searchText\n   */\n  onSearch(searchText: string): void {\n    this.search.emit(searchText);\n  }\n\n  /**\n   * 清除搜尋\n  */\n  onSearchClear(): void {\n    this.searchText = '';\n    this.value = this.#initValue;\n    this.currentRowChange(this.#currentIndex);\n  }\n\n  /**\n   * 是否使用預設的 template\n   */\n  isUseDefaultTemplate() {\n    return this.detailTemplate == undefined || this.titleTemplate == undefined\n  }\n\n  /**\n   * 取得物件的 key\n   */\n  getKey(value: any, index: number): string {\n    return value ? Object.keys(value)[index] || '' : '';\n  }\n}\n","<p-toolbar class=\"flex\" id=\"mydiv\">\n  <div class=\"p-toolbar-group-start\">\n    <div class=\"data\">\n      <div class=\"flex flex-wrap gap-2\">\n        <button\n          pButton\n          pRipple\n          type=\"button\"\n          icon=\"pi pi-user\"\n          (click)=\"isShowDetail = !isShowDetail\"\n          styleClass=\"p-button-secondary mr-2\"\n          class=\"p-button-rounded p-button-text p-button-plain\"\n        > </button>\n      </div>\n\n      <p-dialog\n        header=\"詳細資料\"\n        [(visible)]=\"isShowDetail\"\n        [style]=\"{ width: '20vw' }\"\n        [position]=\"'left'\"\n        [draggable]=\"false\"\n        class=\"border-round w-12rem h-6rem bg-primary font-bold flex align-items-center justify-content-center\"\n      >\n        <ng-container\n          [ngTemplateOutlet]=\"detailTemplate || defaultDetailTemplate\"\n        >\n        </ng-container>\n      </p-dialog>\n    </div>\n  </div>\n\n  <div class=\"p-toolbar-group-center\">\n    <ng-container\n      [ngTemplateOutlet]=\"titleTemplate || defaultTitleTemplate\"\n    ></ng-container>\n\n    <div class=\"py-2\">\n      <button\n        pButton\n        pRipple\n        type=\"button\"\n        icon=\"pi pi-angle-left\"\n        (click)=\"onPrevClick()\"\n        styleClass=\"p-button-secondary mr-2\"\n        class=\"p-button-rounded p-button-text p-button-plain\"\n      > </button>\n\n      <button\n        pButton\n        pRipple\n        type=\"button\"\n        icon=\"pi pi-angle-right\"\n        (click)=\"onNextClick()\"\n        styleClass=\"p-button-secondary mr-2\"\n        class=\"p-button-rounded p-button-text p-button-plain\"\n      > </button>\n    </div>\n  </div>\n\n  <div class=\"p-toolbar-group-start\">\n    <section>\n      <span class=\"p-input-icon-left p-input-icon-right\">\n        <i class=\"pi pi-search\"></i>\n        <input\n          [disabled]=\"isSearchDisabled\"\n          type=\"text\"\n          pInputText\n          placeholder=\"請輸入身分證字號或病歷號碼\"\n          #search\n          [(ngModel)]=\"searchText\"\n          (keyup.enter)=\"onSearch(search.value)\"\n        />\n        <i class=\"pi pi-times\" (click)=\"onSearchClear()\"></i>\n      </span>\n    </section>\n\n    <button\n      pButton\n      pRipple\n      type=\"button\"\n      icon=\"pi pi-list\"\n      (click)=\"isShowList = !isShowList\"\n      styleClass=\"p-button-secondary mr-2\"\n      class=\"p-button-rounded p-button-text p-button-plain\"\n    > </button>\n\n    <p-dialog\n      header=\"查詢清單\"\n      [(visible)]=\"isShowList\"\n      [style]=\"{ width: '20vw' }\"\n      [position]=\"'right'\"\n      [draggable]=\"false\"\n      class=\"border-round w-12rem h-6rem bg-primary font-bold flex align-items-center justify-content-center\"\n    >\n      <p-table [value]=\"value\" [tableStyle]=\"{ 'min-width': '10rem' }\">\n        <ng-template pTemplate=\"body\" let-row let-rowIndex=\"rowIndex\">\n          <tr (click)=\"onRowSelect(rowIndex)\" [pSelectableRow]=\"row\">\n            <ng-container\n              [ngTemplateOutlet]=\"listTemplate || defaultListTemplate\"\n              [ngTemplateOutletContext]=\"{ $implicit: row }\"\n            ></ng-container>\n          </tr>\n        </ng-template>\n      </p-table>\n    </p-dialog>\n\n    <ng-template #defaultTitleTemplate>\n      <div class=\"shortResult\">\n        {{ yamlDocument }}\n      </div>\n    </ng-template>\n\n    <ng-template #defaultDetailTemplate>\n      <pre>{{ yamlDocument }}</pre>\n    </ng-template>\n\n    <ng-template #defaultListTemplate let-row>\n      <td>{{ row[getKey(value[0], 0)] }}</td>\n      <td>{{ row[getKey(value[0], 1)] }}</td>\n    </ng-template>\n  </div>\n</p-toolbar>\n","/*\n * Public API Surface of header\n */\n\nexport * from './lib/header.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}